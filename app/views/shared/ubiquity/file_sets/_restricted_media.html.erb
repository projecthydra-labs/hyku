<!--  Hyku::ManifestEnabledWorkShowPresenter -->
<!-- This whole file was add ubiquitypress to selectively display universalviewer-->
<% file_set_presenter = presenter.representative_presenter %><br>
<% solr_document = presenter.representative_presenter.solr_document %><br>
<% file_size = solr_document["file_size_lts"] %>

<% if presenter.try(:representative_presenter).try(:image?) %>
  <% file_set_presenter = presenter.representative_presenter %>
  <!-- dont' displays universal viewer for files with archived format eg zip -->
  <% if zipped_types.include? check_file_extension(file_set_presenter.label) %>
  <!-- here the universalviewer displays only for current_user or an admin user -->
  <% elsif check_file_is_restricted?(file_set_presenter) && presenter.representative_presenter.image? && (not zipped_types.include? check_file_extension(file_set_presenter.label)) %>
    <%= UniversalViewer.script_tag %>
    <div class="viewer-wrapper"><div class="uv viewer" data-uri="<%= main_app.polymorphic_path [main_app, :manifest, presenter] %>"></div></div>
  <% elsif (  (not file_set_presenter.lease_expiration_date.present?) && (not file_set_presenter.embargo_release_date.present?) && ( file_set_presenter.solr_document['visibility_ssi'] == "open") ) %>
    <%= UniversalViewer.script_tag %>
    <div class="viewer-wrapper"><div class="uv viewer" data-uri="<%= main_app.polymorphic_path [main_app, :manifest, presenter] %>"></div></div>
  <% end %>
<% else %>
  <% if file_size.present? %>
    <% if file_size < ENV["FILE_SIZE_LIMIT"].to_i %>
      <%= media_display presenter.try(:representative_presenter) %>
    <%else%>
      <div class="no-preview">
        No preview available<br>
        <% download_size = return_file_size_in_gb(file_size) %>
        <% message_value = "I would like to access the very large data file (file size #{download_size} GB) held at #{manual_download_path(file_set_presenter.id)}" %>
        <%= link_to('Contact us for download', hyrax.contact_form_index_path(message_value: message_value)) %>
      </div>
    <%end%>
  <%end%>
<%end%>
